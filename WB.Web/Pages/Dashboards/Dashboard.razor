@page "/"
@page "/dashboard"
@page "/home"
@using ApexCharts
@using System.Collections.Generic


<div class="container-fluid">

    <!-- Page Header -->
    <div class="d-md-flex d-block align-items-center justify-content-between my-4 page-header-breadcrumb">
        <h1 class="page-title fw-semibold fs-18 mb-0">Welcome back!</h1>
        <div class="ms-md-1 ms-0">
            <nav>
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
                </ol>
            </nav>
        </div>
    </div>
    <!-- Page Header Close -->
    <!-- Start::row-1 -->
    <div class="row">
        <div class="col-xxl-12 col-xl-12">
            <div class="row row-cols-12">
                <div class="col">
                    <div class="card custom-card">
                        <div class="card-body">
                            <div class="d-flex align-items-top">
                                <div class="me-3">
                                    <span class="avatar avatar-md p-2 bg-primary">
                                        <i class="bi bi-file-earmark-check fs-18"></i>
                                    </span>
                                </div>
                                <div class="flex-fill">
                                    <div class="d-flex mb-1 align-items-top justify-content-between">
                                        <h5 class="fw-semibold mb-0 lh-1">3,454</h5>
                                    </div>
                                    <p class="mb-0 fs-10 op-7 text-muted fw-semibold">TOTAL POLICIES ISSUED</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card custom-card">
                        <div class="card-body">
                            <div class="d-flex align-items-top">
                                <div class="me-3">
                                    <span class="avatar avatar-md p-2 bg-danger">
                                        <i class="bi bi-file-earmark-excel fs-18"></i>
                                    </span>
                                </div>
                                <div class="flex-fill">
                                    <div class="d-flex mb-1 align-items-top justify-content-between">
                                        <h5 class="fw-semibold mb-0 lh-1">1,116</h5>
                                    </div>
                                    <p class="mb-0 fs-10 op-7 text-muted fw-semibold">TOTAL FAILED POLICIES</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card custom-card">
                        <div class="card-body">
                            <div class="d-flex align-items-top">
                                <div class="me-3">
                                    <span class="avatar avatar-md p-2 bg-secondary">
                                        <i class="bi bi-calendar-plus fs-18"></i>
                                    </span>
                                </div>
                                <div class="flex-fill">
                                    <div class="d-flex mb-1 align-items-top justify-content-between">
                                        <h5 class="fw-semibold mb-0 lh-1">1,116</h5>
                                    </div>
                                    <p class="mb-0 fs-10 op-7 text-muted fw-semibold">TOTAL RENEWED POLICIES</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card custom-card">
                        <div class="card-body">
                            <div class="d-flex align-items-top">
                                <div class="me-3">
                                    <span class="avatar avatar-md p-2 bg-pink">
                                        <i class="bi bi-arrow-clockwise fs-18"></i>
                                    </span>
                                </div>
                                <div class="flex-fill">
                                    <div class="d-flex mb-1 align-items-top justify-content-between">
                                        <h5 class="fw-semibold mb-0 lh-1">18</h5>
                                    </div>
                                    <p class="mb-0 fs-10 op-7 text-muted fw-semibold">POLICIES DUE FOR RENEWAL</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xxl-12 col-xl-12">
            <div class="row row-cols-12">
                <div class="col">
                    <div class="card custom-card">
                        <div class="card-body">
                            <div class="d-flex align-items-top">
                                <div class="me-3">
                                    <span class="avatar avatar-md p-2 bg-success">
                                        <i class="bi bi-person-check fs-18"></i>
                                    </span>
                                </div>
                                <div class="flex-fill">
                                    <div class="d-flex mb-1 align-items-top justify-content-between">
                                        <h5 class="fw-semibold mb-0 lh-1">1,468</h5>
                                    </div>
                                    <p class="mb-0 fs-10 op-7 text-muted fw-semibold">CUSTOMER APPROVED QUOTATIONS</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card custom-card">
                        <div class="card-body">
                            <div class="d-flex align-items-top">
                                <div class="me-3">
                                    <span class="avatar avatar-md p-2 bg-teal">
                                        <i class="bi bi-file-earmark-plus fs-18"></i>
                                    </span>
                                </div>
                                <div class="flex-fill">
                                    <div class="d-flex mb-1 align-items-top justify-content-between">
                                        <h5 class="fw-semibold mb-0 lh-1">7,454</h5>
                                    </div>
                                    <p class="mb-0 fs-10 op-7 text-muted fw-semibold">QUOTATIONS GENERATED</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card custom-card">
                        <div class="card-body">
                            <div class="d-flex align-items-top">
                                <div class="me-3">
                                    <span class="avatar avatar-md p-2 bg-warning">
                                        <i class="bi bi-question-square fs-18"></i>
                                    </span>
                                </div>
                                <div class="flex-fill">
                                    <div class="d-flex mb-1 align-items-top justify-content-between">
                                        <h5 class="fw-semibold mb-0 lh-1">54</h5>
                                    </div>
                                    <p class="mb-0 fs-10 op-7 text-muted fw-semibold">QUOTATIONS PENDING FOR REVIEW</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--End::row-1 -->
    <!-- Start::row-2 -->
    <div class="row">
        <div class="col-xl-12">
            <div class="card custom-card">
                <div class="card-header justify-content-between">
                    <div class="card-title">
                        Policies
                    </div>
                    <div class="d-flex">
                        <div class="me-3">
                            <input class="form-control form-control-sm" type="text" placeholder="Search Here" aria-label=".form-control-sm example">
                        </div>
                        <button type="button" class="btn btn-primary btn-sm btn-wave me-3">
                            <i class="ri-filter-3-fill me-2 align-middle d-inline-block"></i>Filters
                        </button>
                        <div class="dropdown">
                            <a href="javascript:void(0);" class="btn btn-primary btn-sm btn-wave waves-effect waves-light" data-bs-toggle="dropdown" aria-expanded="false">
                                Sort By<i class="ri-arrow-down-s-line align-middle ms-1 d-inline-block"></i>
                            </a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a class="dropdown-item" href="javascript:void(0);">New</a></li>
                                <li><a class="dropdown-item" href="javascript:void(0);">Popular</a></li>
                                <li><a class="dropdown-item" href="javascript:void(0);">Relevant</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table text-nowrap table-hover border table-bordered">
                            <thead>
                                <tr>
                                    <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox" id="checkboxNoLabel1" value="" aria-label="..."></th>
                                    <th scope="col">Policy No.</th>
                                    <th scope="col">Organization</th>
                                    <th scope="col">Insured</th>
                                    <th scope="col">Civil ID</th>
                                    <th scope="col">LOB</th>
                                    <th scope="col">Purchase Date</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox" id="checkboxNoLabel12" value="" aria-label="..."></th>
                                    <td>
                                        <div class="d-flex align-items-center fw-semibold">
                                            87452
                                        </div>
                                    </td>
                                    <td><span class="badge bg-blue-transparent">AS Insurance</span></td>
                                    <td>Sara</td>
                                    <td>7981221414</td>
                                    <td>Motor Comp</td>
                                    <td>23/10/2025</td>
                                    <td><span class="badge bg-blue-transparent">Under Review</span></td>
                                    <td>
                                        <div class="hstack gap-2 fs-15">
                                            <a aria-label="anchor" @onclick="@(()=> navigationManager.NavigateTo("/view-quote"))" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-success-light"><i class="ri-eye-line"></i></a>
                                            <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-success-light"><i class="ri-download-2-line"></i></a>
                                            <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-primary-light"><i class="ri-edit-line"></i></a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox" id="checkboxNoLabel12" value="" aria-label="..."></th>
                                    <td>
                                        <div class="d-flex align-items-center fw-semibold">
                                            PMC/01/2025/000127
                                        </div>
                                    </td>
                                    <td><span class="badge bg-blue-transparent">AS Insurance</span></td>
                                    <td>Hassan</td>
                                    <td>988923428943</td>
                                    <td>Motor Comp</td>
                                    <td>12/10/2025</td>
                                    <td><span class="badge bg-success-transparent">Active</span></td>
                                    <td>
                                        <div class="hstack gap-2 fs-15">
                                            <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-success-light"><i class="ri-download-2-line"></i></a>
                                            <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-primary-light"><i class="ri-edit-line"></i></a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox" id="checkboxNoLabel12" value="" aria-label="..."></th>
                                    <td>
                                        <div class="d-flex align-items-center fw-semibold">
                                            PT/01/2023/000452
                                        </div>
                                    </td>
                                    <td><span class="badge bg-blue-transparent">AS Insurance</span></td>
                                    <td>Umair</td>
                                    <td>4522342355234</td>
                                    <td>Travel</td>
                                    <td>12/10/2023</td>
                                    <td><span class="badge bg-danger-transparent">Expired</span></td>
                                    <td>
                                        <div class="hstack gap-2 fs-15">
                                            <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-success-light"><i class="ri-download-2-line"></i></a>
                                            <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-primary-light"><i class="ri-edit-line"></i></a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox" id="checkboxNoLabel12" value="" aria-label="..."></th>
                                    <td>
                                        <div class="d-flex align-items-center fw-semibold">
                                            PT/01/2025/000454
                                        </div>
                                    </td>
                                    <td><span class="badge bg-blue-transparent">SK Insurance</span></td>
                                    <td>Zeeshan</td>
                                    <td>4522342355234</td>
                                    <td>Travel</td>
                                    <td>10/10/2025</td>
                                    <td><span class="badge bg-success-transparent">Active</span></td>
                                    <td>
                                        <div class="hstack gap-2 fs-15">
                                            <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-success-light"><i class="ri-download-2-line"></i></a>
                                            <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-primary-light"><i class="ri-edit-line"></i></a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox" id="checkboxNoLabel12" value="" aria-label="..."></th>
                                    <td>
                                        <div class="d-flex align-items-center fw-semibold">
                                            PMT/01/2025/000532
                                        </div>
                                    </td>
                                    <td><span class="badge bg-blue-transparent">SK Insurance</span></td>
                                    <td>Sandhya</td>
                                    <td>84321938123</td>
                                    <td>Travel</td>
                                    <td>16/10/2025</td>
                                    <td><span class="badge bg-blue-transparent">Issued</span></td>
                                    <td>
                                        <div class="hstack gap-2 fs-15">
                                            <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-success-light"><i class="ri-download-2-line"></i></a>
                                            <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-primary-light"><i class="ri-edit-line"></i></a>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row" class="ps-4"><input class="form-check-input" type="checkbox" id="checkboxNoLabel12" value="" aria-label="..."></th>
                                    <td>
                                        <div class="d-flex align-items-center fw-semibold">
                                            PMR/01/2025/000463
                                        </div>
                                    </td>
                                    <td><span class="badge bg-blue-transparent">SK Insurance</span></td>
                                    <td>Lubna</td>
                                    <td>942394234234</td>
                                    <td>Travel</td>
                                    <td>02/10/2025</td>
                                    <td><span class="badge bg-success-transparent">Active</span></td>
                                    <td>
                                        <div class="hstack gap-2 fs-15">
                                            <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-success-light"><i class="ri-download-2-line"></i></a>
                                            <a aria-label="anchor" href="javascript:void(0);" class="btn btn-icon btn-wave waves-effect waves-light btn-sm btn-primary-light"><i class="ri-edit-line"></i></a>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="card-footer">
                    <div class="d-flex align-items-center">
                        <div>
                            Showing 6 Entries <i class="bi bi-arrow-right ms-2 fw-semibold"></i>
                        </div>
                        <div class="ms-auto">
                            <nav aria-label="Page navigation" class="pagination-style-4">
                                <ul class="pagination mb-0">
                                    <li class="page-item disabled">
                                        <a class="page-link" href="javascript:void(0);">
                                            Prev
                                        </a>
                                    </li>
                                    <li class="page-item active"><a class="page-link" href="javascript:void(0);">1</a></li>
                                    <li class="page-item"><a class="page-link" href="javascript:void(0);">2</a></li>
                                    <li class="page-item">
                                        <a class="page-link text-primary" href="javascript:void(0);">
                                            next
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End::row-2 -->

</div>

@code {

    // Job Subscription Start //
    private List<Subscription> subscription { get; set; } = SampleData.GetSubscriptions();
    private ApexChartOptions<Subscription> subscriptionChartOptions { get; set; } = new();
    public class Subscription
    {
        public string? SubscriptionDay { get; set; }
        public decimal SubscriptionBasic { get; set; }
        public decimal SubscriptionPro { get; set; }
    };
    public static class SampleData
    {
        public static List<Subscription> GetSubscriptions()
        {
            // Replace this with actual data retrieval logic
            List<Subscription> subscription = new List<Subscription>
            {
                new Subscription { SubscriptionDay = "01 Jan", SubscriptionBasic = 75, SubscriptionPro = 35},
                new Subscription { SubscriptionDay = "02 Jan", SubscriptionBasic = 78, SubscriptionPro = 35},
                new Subscription { SubscriptionDay = "03 Jan", SubscriptionBasic = 38, SubscriptionPro = 62},
                new Subscription { SubscriptionDay = "04 Jan", SubscriptionBasic = 39, SubscriptionPro = 63},
                new Subscription { SubscriptionDay = "05 Jan", SubscriptionBasic = 38, SubscriptionPro = 13},
                new Subscription { SubscriptionDay = "06 Jan", SubscriptionBasic = 73, SubscriptionPro = 13},
                new Subscription { SubscriptionDay = "07 Jan", SubscriptionBasic = 73, SubscriptionPro = 60},
                new Subscription { SubscriptionDay = "08 Jan", SubscriptionBasic = 53, SubscriptionPro = 60},
                new Subscription { SubscriptionDay = "09 Jan", SubscriptionBasic = 53, SubscriptionPro = 41},
                new Subscription { SubscriptionDay = "10 Jan", SubscriptionBasic = 16, SubscriptionPro = 41},
                new Subscription { SubscriptionDay = "11 Jan", SubscriptionBasic = 16, SubscriptionPro = 82},
                new Subscription { SubscriptionDay = "12 Jan", SubscriptionBasic = 53, SubscriptionPro = 82},
            };

            return subscription;
        }
    }
    // Job Subscription End //

    //  Candidatess Start //
    private List<Candidates> candidates { get; set; } = DataCandidates.GetCandidates();
    private ApexChartOptions<Candidates> CandidatesChartOptions { get; set; } = new();
    public static class DataCandidates
    {
        public static List<Candidates> GetCandidates()
        {
            List<Candidates> Candidates = new List<Candidates>
            {
                new Candidates { Source = "Female", SourceValue = 1754 },
                new Candidates { Source = "Male", SourceValue = 1234 },
            };

            return Candidates;
        }
    }
    public class Candidates
    {
        public string? Source { get; set; }
        public int SourceValue { get; set; }
    }
    //  Candidatess End //

    protected override void OnInitialized()
    {

        subscriptionChartOptions = new ApexChartOptions<Subscription>
            {
                Chart = new()
                {
                    Toolbar = new ApexCharts.Toolbar
                    {
                        Tools = new Tools { Zoom = false, Zoomin = false, Zoomout = false, Pan = false, Reset = false, Download = false },
                    },
                    DropShadow = new ApexCharts.DropShadow
                    {
                        Enabled = true,
                        Color = "#000",
                        Top = 5,
                        Left = 0,
                        Blur = 3,
                        Opacity = 0.15
                    }
                },
                Grid = new Grid
                {
                    BorderColor = "#f1f1f1",
                },
                Tooltip = new ApexCharts.Tooltip
                {
                    X = new TooltipX
                    {
                        Formatter = @"function(value, opts) {
                    if (value === undefined) {return '';}
                    return  opts.w.globals.categoryLabels[value-1] + ':' + value}"
                    }
                },
                Stroke = new Stroke
                {
                    Curve = Curve.Smooth,
                    Width = [2, 2],
                    LineCap = ApexCharts.LineCap.Butt,
                },
                DataLabels = new DataLabels
                {
                    Enabled = false,
                },
                Legend = new Legend
                {
                    Show = true,
                    Position = ApexCharts.LegendPosition.Top,
                    HorizontalAlign = Align.Center,
                    FontWeight = 600,
                    FontSize = "11px",
                    Labels = new()
                    {
                        Colors = "#74767c",
                    },
                    Markers = new()
                    {
                        Width = 7,
                        Height = 7,
                        StrokeWidth = 0,
                        Radius = 12,
                        OffsetX = 0,
                        OffsetY = 0
                    },
                },
                Markers = new Markers
                {
                    Discrete = new List<MarkersDiscrete> {
                    new MarkersDiscrete   {
                        SeriesIndex = 0,
                        DataPointIndex = 5,
                        FillColor = "var(--primary-color)",
                        StrokeColor = "#fff",
                        Size = 4,
                        Shape = ShapeEnum.Circle,
                    },
                    new MarkersDiscrete  {
                        SeriesIndex = 0,
                        DataPointIndex = 11,
                        FillColor = "var(--primary-color)",
                        StrokeColor = "#fff",
                        Size = 4,
                        Shape = ShapeEnum.Circle,
                    },
                    new MarkersDiscrete  {
                        SeriesIndex = 1,
                        DataPointIndex = 10,
                        FillColor = "#23b7e5",
                        StrokeColor = "#fff",
                        Size = 4,
                        Shape = ShapeEnum.Circle,
                    },
                    new MarkersDiscrete  {
                        SeriesIndex = 1,
                        DataPointIndex = 4,
                        FillColor = "#23b7e5",
                        StrokeColor = "#fff",
                        Size = 4,
                        Shape = ShapeEnum.Circle,
                    }
                },
                    Hover = new()
                    {
                        SizeOffset = 6
                    }
                },
                Yaxis = new List<YAxis>() {
                new YAxis {
                    Title = new AxisTitle {
                        Style = new AxisTitleStyle {
                            Color = "#adb5be",
                            FontSize = "14px",
                            FontFamily = "poppins, sans-serif",
                            FontWeight = 600,
                            CssClass = "apexcharts-yaxis-label"
                        }
                    },
                    Min = 0,
                    Max = 100,
                    StepSize = 20,
                    Labels = new YAxisLabels {
                        Show = true,
                        Style = new AxisLabelStyle {
                            FontSize = "11px",
                            FontWeight = 600,
                            CssClass = "apexcharts-xaxis-label"
                        }
                    },
                },
            },
                Xaxis = new XAxis
                {
                    AxisBorder = new()
                    {
                        Show = true,
                        Color = "rgba(119, 119, 142, 0.05)",
                        OffsetX = 0,
                        OffsetY = 0,
                    },
                    AxisTicks = new()
                    {
                        Show = true,
                        Color = "rgba(119, 119, 142, 0.05)",
                    @* Width = 6, *@
                    OffsetX = 0,
                    OffsetY = 0,
                },
                Labels = new XAxisLabels
                {
                    Rotate = -90,
                    Style = new()
                    {
                        FontSize = "11px",
                        FontWeight = 600,
                        CssClass = "apexcharts-xaxis-label",
                    },
                }
            },
        };

        CandidatesChartOptions = new ApexChartOptions<Candidates>
            {
                Chart = new()
                {
                    Sparkline = new()
                    {
                        Enabled = true,
                    },
                },
                Stroke = new Stroke
                {
                    Curve = Curve.Smooth,
                    Width = 0,
                    LineCap = ApexCharts.LineCap.Round,
                    Colors = new Color(new List<string> { "#fff" }),
                },
                Legend = new Legend
                {
                    Show = false,
                },
                DataLabels = new DataLabels
                {
                    Enabled = false,
                },
                Colors = new Color(new List<string> { "var(--primary-color)", "#23b7e5" }),
                PlotOptions = new PlotOptions
                {
                    Pie = new PlotOptionsPie
                    {
                        Donut = new PlotOptionsDonut
                        {
                            Size = "80%",
                            Background = "transparent",
                            Labels = new DonutLabels
                            {
                                Show = true,
                                Total = new DonutLabelTotal
                                {
                                    Show = true,
                                    ShowAlways = true,
                                    Label = "Total",
                                    FontSize = "22px",
                                    FontWeight = 600,
                                    Color = "#495057",
                                },
                                Value = new DonutLabelValue
                                {
                                    Show = true,
                                    FontSize = "18px",
                                    OffsetY = 6,
                                },
                            },
                        },
                    },
                },
            };
    }


}